:root {
    --primary: #4f46e5;
    --bg: #f8fafc;
    --card-bg: #ffffff;
    --text: #1e293b;
}

body { font-family: 'Segoe UI', sans-serif; background-color: var(--bg); margin: 0; padding: 20px; }
.app-container { max-width: 1000px; margin: 0 auto; }

main { display: grid; grid-template-columns: 300px 1fr; gap: 20px; margin-top: 20px; }

/* Panel Styling */
.input-panel { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); height: fit-content; }
.panel-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }

/* Fixed Toggle Button (+) */
#toggle-form-btn {
    width: 30px; height: 30px; border-radius: 50%; background: var(--primary);
    color: white; border: none; cursor: pointer; font-size: 20px;
    display: flex; align-items: center; justify-content: center;
}
.rotate-btn { transform: rotate(45deg); background: #64748b !important; }

/* Form Visibility */
#form-container { display: none; }
#form-container.show { display: block; }

input, select { width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }

/* --- MODERN BUTTONS SECTION --- */
#contact-form button, #clear-all-btn, #cancel-edit-btn {
    width: 100%;
    padding: 12px;
    margin-top: 10px;
    border: none;
    border-radius: 8px; 
    font-size: 0.95rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    display: block; 
}

/* Submit Button */
button[type="submit"] {
    background: var(--primary);
    color: white;
}
button[type="submit"]:hover {
    background: #4338ca;
    box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
}

/* Modern Cancel Button - Fixed Hidden State */
#cancel-edit-btn {
    background-color: #991b1b;
    color: white;
    display: none !important; /* This is the "Force Hide" on load */
}
#cancel-edit-btn:hover {
    background-color: #7f1d1d;
    box-shadow: 0 4px 12px rgba(153, 27, 27, 0.3);
}

/* Modern Clear All Button */
#clear-all-btn {
    background: transparent;
    color: #ef4444;
    border: 2px solid #fee2e2;
    margin-bottom: 25px;
    width: auto; 
    padding: 8px 16px;
}
#clear-all-btn:hover {
    background: #fef2f2;
    border-color: #fecaca;
    transform: scale(0.98);
}

/* --- CARDS SECTION --- */
.cards-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 15px; }
.contact-card {
    background: white; padding: 15px; border-radius: 10px; border-left: 5px solid var(--primary);
    box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: all 0.3s ease; position: relative;
}
.contact-card:hover { transform: translateY(-5px); box-shadow: 0 8px 15px rgba(0,0,0,0.1); background-color: #f8fafc; cursor: pointer; }

.card-header { display: flex; justify-content: space-between; align-items: flex-start; }
.header-info h3 { margin: 0; font-size: 1.1rem; }
.header-info small { color: #64748b; }
.card-actions { display: flex; gap: 5px; }

.edit-btn, .delete-btn {
    width: 28px; height: 28px; border: none; border-radius: 4px; cursor: pointer;
    display: flex; align-items: center; justify-content: center;
}
.edit-btn { background: #e2e8f0; color: #475569; }
.delete-btn { background: #fee2e2; color: #ef4444; }

/* Tags & Stats */
.priority-tag { font-size: 0.7rem; font-weight: bold; padding: 2px 6px; border-radius: 4px; text-transform: uppercase; }
.p-low { background: #f1f5f9; }
.p-medium { background: #fef9c3; color: #854d0e; }
.p-high { background: #fee2e2; color: #991b1b; }

.task-tag { margin-top: 10px; padding: 8px; background: #e0e7ff; border-radius: 4px; font-size: 0.8rem; cursor: pointer; }
.task-tag.completed { background: #dcfce7; text-decoration: line-through; }

.stats-grid { display: flex; gap: 10px; margin-bottom: 20px; }
.stat-card { flex: 1; background: white; padding: 10px; border-radius: 8px; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
.stat-value { display: block; font-size: 1.2rem; font-weight: bold; color: var(--primary); }

#search-bar { width: 100%; padding: 12px; margin-bottom: 20px; border: 2px solid #e2e8f0; border-radius: 8px; box-sizing: border-box; }
.delete-btn:hover {
    background: #dc2626 !important; /* Brighter red */
    color: white !important;
    transform: scale(1.1); /* Slightly grows the button */
}

.edit-btn:hover {
    background: #059669 !important; /* Professional green */
    color: white !important;
    transform: scale(1.1); /* Matches the delete button growth */
    box-shadow: 0 4px 6px rgba(5, 150, 105, 0.2); /* Soft green glow */
}

/* Also add a smooth transition to the base buttons if you don't have it */
.edit-btn, .delete-btn {
    transition: all 0.2s ease-in-out;
}

.tasks-container {
    margin: 15px 0;
    padding: 10px;
    background: #f1f5f9;
    border-radius: 8px;
}

.tasks-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
    font-size: 0.8rem;
    color: #64748b;
    text-transform: uppercase;
}

.add-subtask-btn {
    background: var(--primary);
    color: white;
    border: none;
    border-radius: 4px;
    width: 20px;
    height: 20px;
    cursor: pointer;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
}

.task-item {
    font-size: 0.85rem;
    padding: 5px 0;
    border-bottom: 1px solid #e2e8f0;
    cursor: pointer;
    transition: color 0.2s;
}

.task-item:last-child { border-bottom: none; }

.task-item.completed {
    color: #94a3b8;
    text-decoration: line-through;
}

.task-item:hover { color: var(--primary); }

/* --- ACTIVITY LOG ENHANCEMENTS --- */

/* Hover effect for the + button */
.add-subtask-btn {
    transition: transform 0.2s ease, background-color 0.2s ease;
}
.add-subtask-btn:hover {
    transform: rotate(90deg) scale(1.2);
    background-color: #4338ca;
}

/* Container for each task item to hold the 'X' */
.task-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 4px;
    position: relative;
    border-radius: 4px;
}

.task-item:hover {
    background: rgba(79, 70, 229, 0.05);
}

/* The 'X' Delete button inside the task */
.delete-task-btn {
    opacity: 0; /* Hidden by default */
    color: #ef4444;
    cursor: pointer;
    font-weight: bold;
    font-size: 14px;
    padding: 0 5px;
    transition: opacity 0.2s ease;
}

.task-item:hover .delete-task-btn {
    opacity: 1; /* Shows only on hover */
}

/* Visual cue for double-clicking */
.task-text {
    flex-grow: 1;
    cursor: pointer;
}

.action-buttons {
    display: flex;
    gap: 10px;
    margin-bottom: 25px;
}

#export-csv-btn {
    background: transparent;
    color: #4f46e5;
    border: 2px solid #e0e7ff;
    width: auto !important; /* Overrides the full-width setting */
    padding: 8px 16px;
    font-size: 0.9rem;
    cursor: pointer;
    border-radius: 8px;
    font-weight: 600;
    transition: all 0.2s ease;
}

#export-csv-btn:hover {
    background: #f5f3ff;
    border-color: #4f46e5;
}

/* Ensure Clear All matches the width style */
#clear-all-btn {
    width: auto !important;
    margin: 0 !important; /* Removes the bottom margin from before */
}

/* --- RESPONSIVE MOBILE LAYOUT --- */
@media (max-width: 768px) {
    /* Stack the sidebar on top of the list */
    main { 
        grid-template-columns: 1fr; 
    }

    /* Make the input panel stay at the top when scrolling */
    .input-panel { 
        position: static; 
        top: 10px; 
        z-index: 100; 
        margin-bottom: 20px; 
    }

    /* Adjust the grid to show one card per row on very small screens */
    .cards-grid {
        grid-template-columns: 1fr;
    }

    /* Make the app container take up more space on mobile */
    .app-container { 
        padding: 10px; 
    }

    /* Adjust stats to stack vertically if screen is tiny */
    .stats-grid {
        flex-direction: column;
    }
}

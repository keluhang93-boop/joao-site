<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Spending | Modern Couple</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="spending-style-v2.css?v=3.0">
</head>
<body class="spending-body">

<header class="main-header">
    <div class="header-left-group">
        <a href="v2-home.html" class="logo-container">
            <span class="logo-text">SMART COUPLE</span>
            <img src="https://cdnai.iconscout.com/ai-image/premium/thumb/ai-heart-lightbulb-3d-icon-png-download-jpg-13221459.png" alt="Logo" class="logo-icon">
        </a>
        <nav class="sketch-nav">
            <a href="spending-v2.html" class="nav-box">Smart Dépenses</a>
            <a href="planning.html" class="nav-box">Smart Planning</a>
            <a href="union.html" class="nav-box">Smart Union</a>
        </nav>
    </div>
    
    <div class="header-right-group">
        <a href="login.html" class="btn-login">Login</a>
        <a href="signup.html" class="btn-signup">Sign Up</a>
        <button class="menu-toggle" id="mobile-menu-btn">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </button>
    </div>

    <div class="mobile-overlay" id="mobile-menu-overlay">
        <nav class="mobile-nav-links">
            <a href="spending-v2.html">Smart Dépenses</a>
            <a href="planning.html">Smart Planning</a>
            <a href="union.html">Smart Union</a>
            <hr style="width: 50%; margin: 10px auto; border: 0.5px solid #D4AF37;">
            <a href="login.html">Login</a>
            <a href="signup.html" style="color: #D4AF37;">Sign Up</a>
        </nav>
    </div>
</header>

<main class="container spending-container">
    
    <div class="spending-hero" style="text-align: center; margin-bottom: 20px;">
        <h1 class="modern-title">Finances Partagées</h1>
        <p style="color: #64748b; font-size: 1.1rem;">Gérez votre budget avec style.</p>
    </div>

    <nav class="spending-sub-nav">
        <button class="sub-nav-btn active" onclick="showView('view-spending', this)">DÉPENSES</button>
        <button class="sub-nav-btn" onclick="showView('view-savings', this)">ÉCONOMIES & OBJECTIFS</button>
        <button class="sub-nav-btn" onclick="showView('view-grocery', this)">LISTE DE COURSES</button>
        <button class="sub-nav-btn" onclick="showView('view-debts', this)">DETTES</button>
        <button class="sub-nav-btn" onclick="showView('view-analysis', this)">ANALYSE</button>
        <button class="sub-nav-btn" onclick="showView('view-settings', this)">PARAMÈTRES</button>
    </nav>

    <div id="view-spending" class="dashboard-view">
        <div class="dashboard-grid">
            <div class="glass-card main-budget">
                <label>BUDGET MENSUEL CIBLE</label>
                <div class="input-with-symbol">
                    <input type="number" id="mainBudgetTarget" value="2500" oninput="calculateTotals()">
                    <span>€</span>
                </div>
            </div>
            <div class="glass-card user-stat blue">
                <label>TOTAL <span class="p1-name">Jean</span></label>
                <div class="input-with-symbol">
                    <input type="number" id="jeanTotalDisplay" readonly> 
                    <span>€</span>
                </div>
            </div>
            <div class="glass-card user-stat yellow">
                <label>TOTAL <span class="p2-name">Monique</span></label>
                <div class="input-with-symbol">
                    <input type="number" id="moniqueTotalDisplay" readonly> 
                    <span>€</span>
                </div>
            </div>
        </div>

<section class="section-wrapper">
    <div class="section-header">
        <div class="header-main-info">
            <h2 class="navy-title" style="margin:0;">Dépenses du Foyer</h2>
            
            <div class="month-controls-row">
                <div class="custom-select-wrapper">
                    <select id="monthSelector" onchange="changeMonth(this.value)"></select>
                    <span class="select-icon">▾</span> 
                </div>
            
                <div class="elegant-action-bar">
                    <button onclick="startNewMonth()" class="btn-elegant blue">+ MOIS</button>
                    <button onclick="deleteCurrentMonth()" class="btn-elegant red">SUPPRIMER</button>
                    <button onclick="resetToDefaults()" class="btn-elegant gray">RESET</button>
                </div>
            </div>
        </div>
    </div>
    
    <div id="spendingGrid"></div> 

    <div class="bottom-add-container">
        <button class="btn-large-add" onclick="addNewCategory()">
            <span class="plus-icon">+</span> Ajouter une dépense
        </button>
    </div>
</section>
    </div>

    <div id="view-savings" class="dashboard-view" style="display:none;">
        <section class="performance-container">
            <div class="stats-side">
                <h2 class="navy-title">Performance du Mois</h2>
                <div class="stat-item">
                    <span>Revenu Total</span>
                    <div class="input-with-symbol modern-stat-input">
                        <input type="number" id="revenuFoyer" value="4000" oninput="calculateTotals()">
                        <span class="currency-symbol">€</span>
                    </div>
                </div>
                <div class="stat-item highlight">
                    <span>Dépenses Actuelles</span>
                    <strong id="totalDepensesDisplay">0.00 €</strong>
                </div>
                <div class="stat-item">
                    <span>Économies</span>
                    <strong id="economieDisplay" style="color: #27ae60;">0.00 €</strong>
                </div>
            </div>

            <div class="graph-side">
                <div class="chart-wrapper">
                    <canvas id="chartRevenu"></canvas>
                </div>
                <div class="chart-legend">
                    <div class="legend-item">
                        <span class="dot dot-depenses"></span>
                        <span>Dépenses</span>
                    </div>
                    <div class="legend-item">
                        <span class="dot dot-epargne"></span>
                        <span>Épargne</span>
                    </div>
                </div>
            </div>
        </section>
		
		<section class="section-wrapper" style="margin-top: 40px;">
    <div class="section-header">
        <div class="header-main-info">
            <h2 class="navy-title" style="margin:0;">Nos Objectifs</h2>
            <p style="color: #64748b; margin:0;">Planifiez vos grands projets ensemble.</p>
        </div>
        <button class="btn-modern-add" onclick="openObjectiveModal()">+ CRÉER OBJECTIF</button>
    </div>

    <div id="objectivesGrid" class="objectives-grid">
        </div>
</section>

<div id="objectiveModal" class="modal-overlay" style="display:none;">
    <div class="glass-card modal-content">
        <h3 class="navy-title">Nouvel Objectif</h3>
        <div class="modal-form">
            <input type="text" id="objName" placeholder="Nom (ex: Nouvelle Maison)">
            <input type="number" id="objTotal" placeholder="Montant total ciblé (€)">
            
            <div class="form-row">
                <div>
                    <label>Début</label>
                    <input type="month" id="objStart">
                </div>
                <div>
                    <label>Fin</label>
                    <input type="month" id="objEnd">
                </div>
            </div>

            <div class="form-row">
                <div>
                    <label>Part <span class="p1-name">Jean</span> /mois</label>
                    <input type="number" id="objPartJean" placeholder="€">
                </div>
                <div>
                    <label>Part <span class="p2-name">Monique</span> /mois</label>
                    <input type="number" id="objPartMonique" placeholder="€">
                </div>
            </div>
            
			<div class="modal-actions">
				<button class="btn-elegant gray" onclick="closeObjectiveModal()">Annuler</button>
				<button class="btn-elegant blue" onclick="saveObjective()">Enregistrer</button>
			</div>
        </div>
    </div>
</div>
		
    </div>

<div id="view-grocery" class="dashboard-view" style="display:none;">
    <section class="section-wrapper">
        <div class="section-header">
            <div class="header-main-info">
                <h2 class="navy-title" style="margin:0;">Liste de Courses</h2>
                <p style="color: #64748b; margin:0;">Gérez vos produits et prix habituels.</p>
            </div>
            
            <div class="action-buttons-group" style="width: auto;">
                <button class="btn-modern-add" onclick="addNewGroceryItem()">+ AJOUTER PRODUIT</button>
            </div>
        </div>
        
        <div id="groceryGrid"></div>

        <div class="grocery-summary">
            <h3 style="margin:0;">Estimation Totale : <span id="groceryTotal">0.00 €</span></h3>
        </div>
    </section>
</div>
 
<div id="view-debts" class="dashboard-view" style="display:none;">
    <section class="section-wrapper">
        <div class="section-header">
            <div class="header-main-info">
                <h2 class="navy-title" style="margin:0;">Dettes & Règlements</h2>
				<div class="relationship-notice" id="relationshipNotice">
					<span class="close-notice" onclick="closeRelationshipNotice()">&times;</span>
						<p><strong>CET OUTIL EST CONÇU POUR VOUS AIDER À GÉRER VOS DÉPENSES INDIVIDUELLES.</strong></p>
						<p>Notre objectif est de vous accompagner vers une gestion financière saine et efficace. Cependant, n'oubliez jamais que la relation avec votre partenaire a bien plus de valeur que l'argent. Une relation épanouie et durable apporte un bien-être que l'argent ne pourra jamais acheter. L'être humain n'est pas qu'un agent économique ; c'est un être social qui a besoin d'aimer et d'être aimé.</p>
						<p><strong>L'AMOUR, ET NON L'ARGENT, EST INSCRIT DANS NOTRE ADN !</strong></p>
						<p>C'est pourquoi nous vous encourageons à faire preuve de flexibilité dans la gestion des comptes avec votre partenaire. Si la maîtrise du budget est indispensable pour avancer dans ce monde économique, la vie n'est réellement belle que lorsqu'elle est vécue avec amour.</p>
				</div>	
						<p style="color: #64748b; margin:0;">Équilibrez vos comptes historiques.</p>
            </div>
        </div>

        <div class="settlement-summary glass-card" style="margin-bottom: 30px;">
            <h2 id="globalDebtStatus">Calcul en cours...</h2>
            <p>Dette totale (Mois en cours + Historique non réglé)</p>
        </div>

        <div id="debtsGrid">
            <div class="expense-list-header debt-header">
                <span>Mois / Description</span>
                <span><span class="p1-name">Jean</span> doit <span class="p2-name">Monique</span></span>
                <span><span class="p2-name">Monique</span> doit <span class="p1-name">Jean</span></span>
                <span>Statut</span>
                <span></span>
            </div>
            <div id="debtsRowsContainer"></div>
        </div>

        <div class="bottom-add-container">
            <button class="btn-large-add" onclick="addNewDebtRow()">+ Ajouter un historique</button>
        </div>
    </section>
</div>
 
 <div id="view-analysis" class="dashboard-view" style="display:none;">
    <section class="section-wrapper">
        <h2 class="navy-title">Analyse des Finances</h2>
        
        <div class="analysis-grid">
            <div class="glass-card chart-card">
                <h3>POURCENTAGE DES DÉPENSES</h3>
                <div class="canvas-container">
                    <canvas id="chartCategories"></canvas>
                </div>
            </div>

            <div class="glass-card chart-card">
                <h3>CONTRIBUTION MENSUELLE</h3>
                <p><span class="p1-name">Jean</span> vs <span class="p2-name">Monique</span></p>
                <div class="canvas-container">
                    <canvas id="chartPartners"></canvas>
                </div>
            </div>

            <div class="glass-card chart-card full-width">
                <h3>REVENU DU FOYER VS DÉPENSES MENSUELLES</h3>
                <div class="canvas-container-bar">
                    <canvas id="chartComparison"></canvas>
                </div>
                <div class="economy-badge">
                    ÉCONOMIE : <span id="economyPercent">0</span>%
                </div>
            </div>
        </div>
    </section>
</div>
 
 <div id="view-settings" class="dashboard-view" style="display:none;">
    <section class="section-wrapper">
        <h2 class="navy-title">Paramètres</h2>
        
        <div class="glass-card" style="text-align: left; padding: 30px; margin-top: 20px;">
            <h3 style="color: var(--primary-color); margin-bottom: 15px;">Noms des Partenaires</h3>
            <div class="form-row">
                <div>
                    <label>Nom Partenaire 1</label>
                    <input type="text" id="settingP1" placeholder="Ex: Jean">
                </div>
                <div>
                    <label>Nom Partenaire 2</label>
                    <input type="text" id="settingP2" placeholder="Ex: Monique">
                </div>
            </div>

            <h3 style="color: var(--primary-color); margin-top: 30px; margin-bottom: 15px;">Thème de l'Application</h3>
            <div style="display: flex; gap: 15px;">
				<button class="btn-theme-selector pink" onclick="applyTheme('pink'); saveSettings();">Thème Rose</button>
				<button class="btn-theme-selector classic" onclick="applyTheme('classic'); saveSettings();">Thème Classique</button>
				<button class="btn-theme-selector" style="background:#1a1c23; color:#D4AF37; border:none; font-weight:bold; padding: 10px 20px; border-radius: 8px; cursor: pointer;" onclick="applyTheme('dark'); saveSettings();">Theme LUXE</button>
            </div>
            
            <div style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
                <button class="btn-modern-add" onclick="saveSettings()">ENREGISTRER LES MODIFICATIONS</button>
            </div>
        </div>
    </section>
</div>
 
</main> 

<script src="main.js"></script>
<script src="spending-v2.js?v=5.0"></script>
</body>
</html>

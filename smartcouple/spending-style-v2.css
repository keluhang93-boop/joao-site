/* --- GLOBAL RESET & FONTS --- */
* { box-sizing: border-box; }

body.spending-body {
    background-color: #ffffff !important; 
    color: #1e293b;
    margin: 0;
}

h1, h2, .modern-title, .logo-text, .navy-title { font-family: 'Playfair Display', serif; }
input, button, span, div { font-family: 'Lato', sans-serif; }

.spending-container {
    max-width: 1100px !important;
    margin: 120px auto 50px !important;
    padding: 0 20px;
    display: block;
}

/* --- DASHBOARD TOP CARDS --- */
.dashboard-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
    margin: 40px 0;
}

.glass-card {
    background: white;
    padding: 25px;
    border-radius: 20px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.03);
    text-align: center;
    border-top: 5px solid #eee;
}

.glass-card.blue { border-top-color: #1f4e79; }
.glass-card.yellow { border-top-color: #D4AF37; }
.glass-card.main-budget { border-top-color: #4B0082; }

/* --- THE UNIFIED BOX FIX (Centers everything) --- */
.glass-card input, 
.modern-stat-input input, 
#jeanTotalDisplay, 
#moniqueTotalDisplay,
.user-stat input {
    border: none !important;
    background: #f8fafc !important;
    border-radius: 12px !important;
    text-align: center !important; 
    padding: 0 !important; 
    line-height: 50px !important; /* This centers the text vertically */
    font-size: 1.3rem !important;
    font-weight: 700 !important;
    color: #1f4e79 !important;
    width: 160px !important;      
    height: 50px !important;     
    display: inline-block;
    vertical-align: middle;
}

/* --- THE LISTS (Dépenses & Dettes) --- */
.expense-list-header, .expense-row {
    display: grid;
    /* 7 Columns: Cat, Jean, Monique, Total, Settled, Recur, Delete */
    grid-template-columns: 2fr 1fr 1fr 1fr 0.6fr 0.6fr 0.4fr;
    align-items: center;
    gap: 15px;
    padding: 12px 20px;
}

.expense-row {
    background: white;
    margin-bottom: 12px;
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.02);
    border: 1px solid #f1f5f9;
}

.expense-row input { border: none !important; background: transparent !important; font-size: 1rem; width: 100%; }
.total-cell { font-weight: bold; color: #1f4e79; }

/* --- ROW STATES --- */
.row-recurring { background-color: #f1f5f9 !important; border-left: 5px solid #4B0082 !important; }
.row-settled { opacity: 0.5; background: #f8fafc !important; }
.row-settled input { text-decoration: line-through; }

.btn-delete-hover {
    background: none; border: none; color: #ef4444; font-size: 1.4rem; cursor: pointer; visibility: hidden;
}
.expense-row:hover .btn-delete-hover { visibility: visible; }

/* --- PERFORMANCE & GRAPH --- */
.performance-container {
    display: flex !important;
    justify-content: space-between;
    align-items: center;
    background: white;
    padding: 40px;
    border-radius: 24px;
    margin-top: 50px;
    box-shadow: 0 15px 35px rgba(0,0,0,0.05);
}

.chart-wrapper { width: 250px !important; height: 250px !important; }

/* --- SECTION SPACING --- */
.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 40px;    /* Adds space ABOVE the title */
    margin-bottom: 25px; /* Adds space BETWEEN title/button and the list */
}

/* --- CUSTOM GRAPH LEGEND --- */
/* This styling ensures the dots and text align perfectly */
.chart-legend {
    display: flex;
    justify-content: center;
    gap: 25px;
    margin-top: 20px;
}

.legend-item {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 0.95rem;
    font-weight: 600;
    color: #1f4e79;
}

/* Colors matching your graph */
.dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    display: inline-block;
}
.dot-depenses { background-color: #D4AF37; } /* Gold */
.dot-epargne { background-color: #1f4e79; }  /* Navy Blue */

.spending-sub-nav {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-bottom: 30px;
    flex-wrap: wrap;
}

.sub-nav-btn {
    background: white;
    border: 1px solid #1f4e79;
    padding: 10px 20px;
    font-weight: 700;
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.3s ease;
    text-transform: uppercase;
}

.sub-nav-btn.active {
    background: #1f4e79;
    color: white;
}

.sub-nav-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    border-color: #ccc;
}

/* Ensure the views fill the space correctly */
.dashboard-view {
    animation: fadeIn 0.4s ease;
}

/* --- MODERN MONTH SELECTOR & DELETE BUTTON --- */

/* Align title and controls vertically */
.header-main-info {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.month-controls-row {
    display: flex;
    align-items: center;
    gap: 15px;
}

/* Styled Select Box */
.custom-select-wrapper {
    position: relative;
    display: inline-block;
}

#monthSelector {
    appearance: none; /* Removes default arrow */
    -webkit-appearance: none;
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    padding: 8px 35px 8px 15px;
    font-size: 0.95rem;
    font-weight: 600;
    color: #1f4e79;
    cursor: pointer;
    transition: all 0.2s ease;
    min-width: 160px;
}

#monthSelector:hover {
    border-color: #1f4e79;
    background: #fff;
}

.select-icon {
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 0.7rem;
    color: #1f4e79;
    pointer-events: none;
}

/* Minimalist Delete Button */
.btn-delete-minimal {
    background: none;
    border: none;
    color: #94a3b8;
    font-size: 0.85rem;
    font-weight: 500;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 5px;
    transition: color 0.2s ease;
    padding: 5px;
}

.btn-delete-minimal:hover {
    color: #ef4444;
}

.btn-delete-minimal .icon {
    font-size: 1rem;
}

/* --- ENHANCED GROCERY LIST STYLING --- */
/* --- FINAL REFINED GROCERY STYLING --- */

/* Desktop Grid Alignment */
.grocery-header, .grocery-row {
    display: grid;
    grid-template-columns: 2.5fr 1fr 1fr 0.8fr 50px; 
    gap: 15px;
    padding: 12px 20px;
    align-items: center; /* Forces all items to be on the same horizontal level */
}

.grocery-header span {
    align-self: center;
}

.grocery-row {
    background: white;
    margin-bottom: 10px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.03);
    border-left: 4px solid #1f4e79;
    min-height: 60px; /* Ensures consistent row height */
}

/* Ensure all input groups (even the one for Produit) use the same wrapper logic */
.input-wrapper-group {
    display: flex;
    flex-direction: column;
    justify-content: center;
    height: 100%;
}

.grocery-row input {
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    padding: 10px 12px;
    border-radius: 8px;
    width: 100%;
    font-size: 0.9rem;
    height: 40px; /* Fixed height for all inputs to keep them level */
}

/* Label logic: Hidden on Desktop, Visible on Mobile */
.mobile-only-label {
    display: none; 
}

/* --- MOBILE REFINEMENT (850px) --- */
@media (max-width: 850px) {
    .grocery-row {
        grid-template-columns: 1fr 1fr; /* 2 Column Grid */
        grid-template-rows: auto auto auto;
        gap: 10px;
        padding: 15px;
        margin-top: 10px; /* Give some space between items */
    }

    /* Hide the desktop header row completely on mobile */
    .grocery-header {
        display: none !important;
    }
    
    /* Produit: Top Row, spans full width */
    .grocery-row .input-wrapper-group:nth-child(1) {
        grid-column: span 2;
    }

    /* Prix: Middle Row, Left side */
    .grocery-row .input-wrapper-group:nth-child(2) {
        grid-column: 1;
        grid-row: 2;
    }

    /* Unité/Poids: Middle Row, Right side */
    .grocery-row .input-wrapper-group:nth-child(3) {
        grid-column: 2;
        grid-row: 2;
    }

    /* Quantité: Bottom Row, Left side */
    .grocery-row .input-wrapper-group:nth-child(4) {
        grid-column: 1;
        grid-row: 3;
    }

    /* Delete Button (X): Bottom Row, Right side (next to Quantité) */
    .btn-delete-grocery {
        grid-column: 2;
        grid-row: 3;
        align-self: end;
        justify-self: end;
        margin-bottom: 5px;
        width: 100% !important; /* Make it easier to tap on mobile */
        max-width: 50px;
    }

    .mobile-only-label {
        display: block;
        font-size: 0.65rem;
        color: #64748b;
        font-weight: bold;
        text-transform: uppercase;
        margin-bottom: 4px;
    }
}

/* Mobile Adjustments */
@media (max-width: 850px) {
    .month-controls-row {
        width: 100%;
        justify-content: flex-start;
    }
    
    #monthSelector {
        flex: 1;
        max-width: 200px;
    }
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

/* --- MOBILE FIX --- */
@media (max-width: 850px) {
    #spendingGrid, #debtGrid { overflow-x: auto; display: block; padding-bottom: 15px; }
    .expense-list-header, .expense-row {
        min-width: 750px;
        grid-template-columns: 2fr 1fr 1fr 1fr 0.6fr 0.6fr 0.4fr !important;
    }
    .performance-container { flex-direction: column !important; }
    .btn-delete-hover { visibility: visible !important; }
}

/* --- MOBILE BUTTONS & HEADER FIX --- */
/* --- MOBILE REPAIR FOR 850px AND BELOW --- */
@media (max-width: 850px) {
    /* Ensure the container itself doesn't scroll horizontally */
    .section-wrapper {
        overflow-x: hidden !important; 
        padding: 0 10px !important;
    }

    .section-header {
        display: flex !important;
        flex-direction: column !important; /* Stack Title and Buttons */
        align-items: center !important;
        gap: 15px !important;
        width: 100% !important;
    }

    /* Group 1: Identity & Selector */
    .section-header > div:first-child {
        display: flex !important;
        flex-direction: row !important;
        flex-wrap: wrap;
        justify-content: center;
        gap: 10px !important;
        width: 100%;
    }

    /* Group 2: THE ACTION BUTTONS (The "Blue Area") */
    .section-header > div:last-child {
        display: flex !important;
        flex-direction: row !important; /* Force side-by-side */
        width: 100% !important;         /* Fit exactly to screen width */
        max-width: 100vw !important;
        justify-content: space-between !important;
        gap: 5px !important;           /* Tiny gap */
        padding: 0 5px;
    }

    /* Force the buttons to be small and never scroll */
    .btn-modern-add {
        flex: 1 1 0px !important;     /* Force them to share space 33% each */
        min-width: 0 !important;      /* Allow them to shrink below their text size */
        padding: 10px 2px !important; /* Narrow padding */
        font-size: 10px !important;   /* Small font to fit text */
        white-space: nowrap !important;
        overflow: hidden;             /* Safety if text is too long */
        text-overflow: ellipsis;      /* Adds "..." if text is too long */
        text-align: center;
        border-radius: 8px !important;
    }

    /* The list can still scroll if it needs to, but the buttons won't */
    #spendingGrid {
        width: 100%;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }
}

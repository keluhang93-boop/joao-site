<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Schedule | Calendrier de Mariage</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Lato:wght@300;400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        body { margin: 0; font-family: 'Lato', sans-serif; background-color: #fdfafb; color: #333; }
        .container { max-width: 900px; margin: 100px auto 40px auto; padding: 20px; }
        h1 { font-family: 'Playfair Display', serif; text-align: center; color: #444; }

        /* --- CALENDAR --- */
        .calendar-card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); margin-bottom: 40px; }
        .calendar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 10px; text-align: center; }
        .day { padding: 15px 5px; border-radius: 8px; font-size: 0.9rem; border: 1px solid #f9f9f9; }
        .highlight { background-color: #ffe6e9 !important; border: 1px solid #d63384 !important; color: #d63384; font-weight: bold; }

        /* --- ACTION BUTTONS (+ and -) --- */
        .actions { display: flex; justify-content: center; gap: 20px; margin-bottom: 30px; }
        .btn-action { width: 50px; height: 50px; border-radius: 50%; border: none; color: white; font-size: 24px; cursor: pointer; transition: 0.3s; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .btn-add { background-color: #28a745; }
        .btn-delete { background-color: #dc3545; }
        .btn-action:hover { transform: scale(1.1); opacity: 0.9; }

        /* --- TIMELINE --- */
        .timeline { position: relative; margin: 40px 0; padding-left: 40px; border-left: 2px solid #fceef5; }
        .event { position: relative; margin-bottom: 30px; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.03); }
        .event::before { content: ''; position: absolute; left: -51px; top: 25px; width: 20px; height: 20px; background: #d63384; border: 4px solid white; border-radius: 50%; }
        .date-tag { font-weight: bold; color: #d63384; font-size: 0.8rem; }

        /* --- MODAL BOX (Popup) --- */
        #modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); }
        .modal-content { background: white; margin: 10% auto; padding: 30px; border-radius: 15px; width: 400px; box-shadow: 0 5px 30px rgba(0,0,0,0.2); }
        .modal-content input, .modal-content textarea { width: 100%; margin: 10px 0; padding: 10px; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box; }
        .modal-btns { display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px; }
    </style>
</head>
<body>

    <header>
        <a href="index.html" class="logo">Smart Couple</a>
        <nav>
            <a href="index.html" class="nav-link">Accueil</a>
            <a href="spending.html" class="nav-link">Dépenses</a>
            <a href="schedule.html" class="nav-link active">Calendrier</a>
        </nav>
    </header>

    <div class="container">
        <h1>Calendrier Partagé</h1>

        <div class="actions">
            <button class="btn-action btn-add" onclick="openModal()">+</button>
            <button class="btn-action btn-delete" onclick="deleteEvent()">-</button>
        </div>

        <div class="calendar-card">
            <div class="calendar-header"><h2>Janvier 2026</h2></div>
            <div class="calendar-grid" id="calendarGrid">
                </div>
        </div>

        <div class="timeline" id="timelineList">
            </div>
    </div>

    <div id="modal">
        <div class="modal-content">
            <h2 style="font-family: 'Playfair Display';">Nouvel Événement</h2>
            <input type="number" id="eventDay" placeholder="Jour (ex: 15)" min="1" max="31">
            <input type="text" id="eventTitle" placeholder="Titre (ex: Dégustation)">
            <textarea id="eventDesc" placeholder="Description..."></textarea>
            <div class="modal-btns">
                <button onclick="closeModal()" style="border:none; padding:10px;">Annuler</button>
                <button onclick="saveEvent()" style="background:#d63384; color:white; border:none; padding:10px 20px; border-radius:5px;">Enregistrer</button>
            </div>
        </div>
    </div>

    <script>
        let events = [
            { day: 15, title: "Dégustation du Menu", desc: "Rendez-vous au Château." }
        ];

        function renderAll() {
            const grid = document.getElementById('calendarGrid');
            const list = document.getElementById('timelineList');
            grid.innerHTML = '';
            list.innerHTML = '';

            // Render Calendar
            for(let i=1; i<=31; i++) {
                const isHighlight = events.find(e => e.day == i);
                grid.innerHTML += `<div class="day ${isHighlight ? 'highlight' : ''}">${i}</div>`;
            }

            // Render Timeline
            events.sort((a,b) => a.day - b.day).forEach(e => {
                list.innerHTML += `
                    <div class="event">
                        <div class="date-tag">${e.day} Janvier 2026</div>
                        <h3>${e.title}</h3>
                        <p>${e.desc}</p>
                    </div>`;
            });
        }

        function openModal() { document.getElementById('modal').style.display = 'block'; }
        function closeModal() { document.getElementById('modal').style.display = 'none'; }

        function saveEvent() {
            const day = document.getElementById('eventDay').value;
            const title = document.getElementById('eventTitle').value;
            const desc = document.getElementById('eventDesc').value;

            if(day && title) {
                events.push({ day: parseInt(day), title, desc });
                renderAll();
                closeModal();
            }
        }

        function deleteEvent() {
            const dayToDelete = prompt("Entrez le numéro du jour à supprimer :");
            if(dayToDelete) {
                events = events.filter(e => e.day != dayToDelete);
                renderAll();
            }
        }

        renderAll(); // Initial load
    </script>

</body>
</html>
